<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<title>AngryAnt - CopyInspector - </title>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="stylesheet" href="/css/screen/base.css" type="text/css" media="screen" />
<link rel="stylesheet" href="/css/screen/site.css" type="text/css" media="screen" />
<link rel="stylesheet" href="/css/print/base.css" type="text/css" media="print" />
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-34029666-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>


	</head>
	<body>
		<div id="site">
			<div id="sidebar">
				<h1 class="header"><a href="/" style="padding:0; margin:0; float: none;">AngryAnt</a></h1>
<div id="subtitle">CopyInspector</div>

	
		<a href="/">Home</a>
		
	

	
		<a href="/feed">Feed</a>
		
	

	
		<a href="/videos">Videos</a>
		
	

	
		<a href="/freelance">Freelance</a>
		
	

	
		<a href="/path">Path</a>
		
	

	
		<a href="/behave">Behave</a>
		
	

	
		<a href="/work">Work</a>
		
	


<div id="external">
	<a href="/feed.xml">RSS</a>
	<a href="/feed.articles.xml">Full RSS</a>
	<a href="https://gist.github.com/AngryAnt">Gist</a>
	<a href="https://twitter.com/AngryAnt">Twitter</a>
	<a href="http://www.linkedin.com/in/EmilJohansen">LinkedIn</a>
</div>
<div class="comment">
	That's right - no comments. Please use Twitter or other listed means for feedback.
</div>
<img id="logo" title="Logo" alt="Logo" src="/resources/logo.png">

			</div>
			<div id="container">
				<span class="date">04 Nov 2009</span>
				<h1 id="Top">CopyInspector</h1>
				
				<div id="content">
					<p class="post"><p>Yea I know. It&#8217;s been a while. I do have two very good excuses though: 2.6 and Unite &#8216;09. If you enjoyed those then zip it and read on. If not, I&#8217;m really out of ammo and sorry for the delay.</p>
<p>At Unite, I attended the talk by John Grden of infrared5 on the special (free) Unity for flash users day. During this session he complained about wanting to be able to copy his runtime transform changes inside the <span class="caps">IDE</span> (he was copying by way of paper notes it seemed). I decided to take up the challenge when he continued with &#8220;&#8230; but someone is probably going to show me how to do that after this&#8221; and after his talk I handed him a custom inspector editor script for solving that specific problem.</p>
<p>Later at the conference I had some time to kill and did a rewrite to expand the script to be general for any component type. I didn&#8217;t have the time to hand John that version, but I suppose I&#8217;ll just email him a link to this post.</p>
<p>So anyway &#8211; lets talk implementation:</p>
<ul>
	<li>Add CopyInspector.cs to Assets/Editor.</li>
	<li>Add CopyTransformInspector.cs to Assets/Editor.</li>
	<li>For each other component to be made copy/paste-able:
	<ul>
		<li>Add CopyYourComponentTypeInspector.cs to Assets/Editor.</li>
		<li>Rename it appropriately.</li>
		<li>Rename the class to match the file name.</li>
		<li>Change YourComponentType in &#8220;[CustomEditor (typeof (YourComponentType))]&#8221; to the type of component you wish to affect.</li>
	</ul></li>
</ul>
<p><img src="http://eej.dk/angryant/wp-content/uploads/2009/11/CopyTransformInspector.png" alt="" /></p>
<p>You&#8217;ll notice that CopyTransformInspector has some additional code to it. This is due to the fact that this inspector is rendered non-standard and the code provided just replicates that.</p>
<p>Not really sure why syntax highlighting is not kicking in&#8230; Will have a look at that later.</p>
<p>Codes!</p>
<p>CopyInspector.cs
<script src='https://gist.github.com/3806123.js?file=CopyInspector.cs'></script><div><noscript><pre><code>using UnityEngine;
using UnityEditor;
using System.Collections;
using System.Collections.Generic;
using System.Reflection;</p>
<p>public class CopyInspector : Editor
{
	static System.Type m_OriginalType;
	static Dictionary object&gt; m_Values;</p>
<p>private List  GetProperties (Component component)
	{
		List &lt;string&gt; ignoredProperties;
		List  properties;</p>
<p>properties = new List  ();
		ignoredProperties = new List &lt;string&gt; ();
		foreach (PropertyInfo propertyInfo in typeof (Component).GetProperties ())
		{
			ignoredProperties.Add (propertyInfo.Name);
		}</p>
<p>foreach (PropertyInfo propertyInfo in component.GetType ().GetProperties ())
		{
			if (ignoredProperties.Contains (propertyInfo.Name))
			{
				continue;
			}
			properties.Add (propertyInfo);
		}</p>
<p>return properties;
	}</p>
<p>public override void OnInspectorGUI ()
	{
		DrawDefaultInspector ();
		OnCopyInspectorGUI ();
	}</p>
<p>public void OnCopyInspectorGUI ()
	{
		bool enabled;
		List  properties;
		Component component;</p>
<p>component = target as Component;</p>
<p>if (component == null)
		{
			return;
		}</p>
<p>GUILayout.Space (10.0f);</p>
<p>Color backgroundColor = <span class="caps">GUI</span>.backgroundColor;</p>
<p><span class="caps">GUI</span>.backgroundColor = new Color (0.8f, 0.8f, 0.8f);</p>
<p>GUILayout.BeginVertical (&quot;Toolbar&quot;);</p>
<p><span class="caps">GUI</span>.backgroundColor = backgroundColor;</p>
<p>GUILayout.BeginHorizontal ();</p>
<p>GUILayout.Space (10.0f);</p>
<p>GUILayout.Label (&quot;Copied: &quot; + (m_OriginalType != null ? m_OriginalType.Name : &quot;Nothing&quot;), &quot;MiniLabel&quot;);</p>
<p>GUILayout.FlexibleSpace ();</p>
<p>if (GUILayout.Button (new GUIContent (&quot;Copy&quot;, &quot;Copy component values&quot;), &quot;MiniLabel&quot;))
				{
					m_OriginalType = target.GetType ();</p>
<p>properties = GetProperties (component);</p>
<p>m_Values = new Dictionary object&gt; ();
					foreach (PropertyInfo property in properties)
					{
						m_Values [property] = property.GetValue (component, null);
					}
				}</p>
<p>enabled = <span class="caps">GUI</span>.enabled;
				<span class="caps">GUI</span>.enabled = target.GetType () == m_OriginalType;</p>
<p>GUILayout.Space (10.0f);</p>
<p>if (GUILayout.Button (new GUIContent (&quot;Paste&quot;, &quot;Paste component values&quot;), &quot;MiniLabel&quot;))
				{
					properties = GetProperties (component);
					foreach (PropertyInfo property in properties)
					{
						if (!property.CanWrite)
						{
							continue;
						}</p>
<p>property.SetValue (component, m_Values [property], null);
					}
				}</p>
<p>GUILayout.Space (10.0f);</p>
<p><span class="caps">GUI</span>.enabled = enabled;</p>
<p>GUILayout.EndHorizontal ();</p>
<p>GUILayout.EndVertical ();</p>
<p>GUILayout.Space (-2.0f);
	}
}</code></pre></noscript></div></p>
<p>CopyTransformInspector.cs
<script src='https://gist.github.com/3806123.js?file=CopyTransformInspector.cs'></script><div><noscript><pre><code>using UnityEngine;
using UnityEditor;
using System.Collections;</p>
<p>[CustomEditor (typeof (Transform))]
public class CopyTransformInspector : CopyInspector
{
	public override void OnInspectorGUI ()
	{
		Transform transform;
		Vector3 localPosition, localScale;
		Quaternion localRotation;</p>
<p>transform = target as Transform;</p>
<p>localPosition = EditorGUILayout.Vector3Field (&quot;Position&quot;, transform.localPosition);
		localRotation = Quaternion.Euler (EditorGUILayout.Vector3Field (&quot;Rotation&quot;, transform.localRotation.eulerAngles));
		localScale = EditorGUILayout.Vector3Field (&quot;Scale&quot;, transform.localScale);</p>
<p>if (<span class="caps">GUI</span>.changed)
		{
			transform.localPosition = localPosition;
			transform.localRotation = localRotation;
			transform.localScale = localScale;
		}</p>
<p>OnCopyInspectorGUI ();
	}
}</code></pre></noscript></div></p>
<p>CopyYourComponentTypeInspector.cs
<script src='https://gist.github.com/3806123.js?file=CopyYourComponentTypeInspector.cs'></script><div><noscript><pre><code>using UnityEngine;
using UnityEditor;
using System.Collections;</p>
<p>[CustomEditor (typeof (YourComponentType))]
public class CopyYourComponentTypeInspector : CopyInspector{}</code></pre></noscript></div></p></p>
					<p>&nbsp;</p>

					<div id="feed">
						<div id="newer">
							
								
									
										<h1>Newer posts:</h1>
										<p style="max-height: 1pt">&nbsp;</p>
									
									<a href="/2013/10/06/Behave-2-1/" class="titleSmall">Behave 2.1</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2013/08/25/Behave-2-0/" class="titleSmall">Behave 2.0</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2013/08/04/Unity-Hacks-Dual-sticks/" class="titleSmall">Unity Hacks: Dual sticks</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2013/07/28/Unity-Hacks-Cameras/" class="titleSmall">Unity Hacks: Cameras</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2013/07/19/Unity-Hacks-Touch-gestures/" class="titleSmall">Unity Hacks: Touch gestures</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2013/07/17/OnRenderTextureGUI/" class="titleSmall">OnRenderTextureGUI</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2013/07/05/Unite-13-video-Unity-Hacks-available/" class="titleSmall">Unite 13 video "Unity Hacks" available</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2013/06/07/The-implicit-local-network-interface/" class="titleSmall">The implicit local network interface</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2013/05/21/Talks-and-progress/" class="titleSmall">Talks and progress</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2013/05/14/Five-years-of-Unity-expertise-looking-for-contracts/" class="titleSmall">Five years of Unity expertise looking for contracts</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2012/12/22/Automagic-Unity-Android-Java-gadget-OF-DOOM/" class="titleSmall">Automagic Unity Android Java gadget OF DOOM!</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2012/10/03/Invading-Planet-from-your-couch/" class="titleSmall">Invading Planet from your couch</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2012/09/28/Mountain-Lion-and-laggy-bluetooth-and-duct-tape/" class="titleSmall">Mountain Lion and laggy bluetooth and duct-tape</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2012/09/23/Unite-12-video-and-new-videos-section-available/" class="titleSmall">Unite 12 video and new videos section available</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2012/08/28/Asia-Bootcamp-videos-now-available/" class="titleSmall">Asia Bootcamp videos now available</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2012/05/17/path-is-now-mit-licensed/" class="titleSmall">Path is now MIT licensed</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2011/11/30/behave-1-4-released/" class="titleSmall">Behave 1.4 released</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2011/10/09/so-ive-been-a-bit-busy-lately/" class="titleSmall">So I've been a bit busy lately</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2011/04/28/behave-1-3-released/" class="titleSmall">Behave 1.3 released</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2011/04/23/igda-unity-sig-slides/" class="titleSmall">IGDA Unity SIG slides</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2011/03/17/second-unity-igda-sig-this-evening-scene-construction-and-ai/" class="titleSmall">Second Unity IGDA SIG this evening: Scene construction and AI</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2011/03/10/first-igda-unity-sig-this-evening/" class="titleSmall">First IGDA Unity SIG this evening</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2011/03/03/alternative-licensing-available/" class="titleSmall">Alternative licensing available</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2011/02/15/pathfinding-in-two-line/" class="titleSmall">Pathfinding in two lines</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2011/02/15/path-2-released/" class="titleSmall">Path 2 released</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2011/02/02/assembling-and-assimilating/" class="titleSmall">Assembling and assimilating</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2011/01/29/path-2-intro-screencast/" class="titleSmall">Path 2 intro screencast</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2011/01/29/path-2-beta-release-for-ggj/" class="titleSmall">Path 2 beta release for GGJ</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2011/01/25/aigamedev-master-class-video-now-online-3/" class="titleSmall">AIgameDev master class video now online</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2011/01/09/expanding-beta/" class="titleSmall">Expanding beta</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2010/11/28/behave-aigamedev-master-class-public-stream/" class="titleSmall">Behave AIgameDev master class public stream</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2010/11/27/behave-master-class-on-open-aigamedev-stream-tomorrow/" class="titleSmall">Behave master class on open AIgameDev stream tomorrow</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2010/10/29/interview-with-aigamedev/" class="titleSmall">Interview with AIGameDev</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2010/10/24/new-video-from-tree-to-code/" class="titleSmall">New video: From tree to code</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2010/10/23/issue-tracking-on-github-behave-release-project/" class="titleSmall">Issue tracking on github Behave release project</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2010/10/22/it-university-copenhagen-unity-course-completed/" class="titleSmall">IT University Copenhagen Unity course completed</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2010/10/21/it-university-copenhagen-unity-course-files-thursday/" class="titleSmall">IT University Copenhagen Unity course files Thursday</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2010/10/20/cph-it-university-unity-course-files/" class="titleSmall">CPH IT University Unity course files</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2010/10/11/behave-1-2-released/" class="titleSmall">Behave 1.2 released</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2010/09/29/video-behave-starting-from-scratch/" class="titleSmall">Video: Behave - starting from scratch</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2010/09/29/behave-runtime-documentation-updated/" class="titleSmall">Behave runtime documentation updated</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2010/09/29/behave-1-1-released/" class="titleSmall">Behave 1.1 released</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2010/03/19/faff-cleanup-sketch/" class="titleSmall">FAFF cleanup: Sketch</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2010/03/15/building-a-menu-of-delegates-and-enums/" class="titleSmall">Building a menu of delegates and enums</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2010/03/10/pick-me-pick-me/" class="titleSmall">Pick me! Pick me!</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2010/01/14/optimising-coroutine-yielding-in-c/" class="titleSmall">Optimising coroutine yielding in C#</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2010/01/05/downloading-the-hydra/" class="titleSmall">Downloading the hydra</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2009/11/15/new-license-of-path-gpl/" class="titleSmall">New license of Path: GPL</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									</div>
									<div id="older">
										<h1>Older posts:</h1>
										<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2009/10/04/magnetic/" class="titleSmall">Magnetic</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2009/09/18/gui-drag-drop/" class="titleSmall">GUI drag-drop</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2009/09/17/logging-an-entire-gameobject/" class="titleSmall">Logging an entire GameObject</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2009/09/07/i-bet-you-cant-type-an-a/" class="titleSmall">I bet you can't type an A!</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2009/08/31/where-did-that-component-go/" class="titleSmall">Where did that component go?</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2009/08/19/unitysteer/" class="titleSmall">UnitySteer</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2009/05/18/new-and-improved-behave-10-released/" class="titleSmall">New and improved: Behave 1.0 released</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2009/04/08/behave-03b-and-unity-25/" class="titleSmall">Behave 0.3b and unity 2.5</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2009/03/20/behave-03b-hotfix/" class="titleSmall">Behave 0.3b hotfix</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2009/03/19/path-tutorial-video-available/" class="titleSmall">Path tutorial video available</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2009/03/18/path-10-launched/" class="titleSmall">Path 1.0 launched!</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2008/12/17/community-tutorial-2/" class="titleSmall">Continued community tutorials</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2008/11/30/community-tutorial/" class="titleSmall">Community tutorial</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2008/11/28/new-tutorial/" class="titleSmall">New tutorial</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2008/11/04/first-tutorial-available/" class="titleSmall">First tutorial available</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2008/11/02/behave-03b/" class="titleSmall">Behave 0.3b</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2008/10/25/unite-08-open-mic-session/" class="titleSmall">unite '08 open-mic session</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2008/09/24/behave-02b/" class="titleSmall">Behave 0.2b</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2008/09/09/behave-01b/" class="titleSmall">Behave 0.1b</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2008/09/08/behave-pre-release/" class="titleSmall">Behave pre-release</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2008/04/15/path-beta-03b/" class="titleSmall">Path beta 0.3b</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2008/04/12/path-beta-02b/" class="titleSmall">Path beta 0.2b</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2008/04/05/path-beta-01b/" class="titleSmall">Path beta 0.1b</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2008/03/30/path-pre-release/" class="titleSmall">Path pre-release</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
						</div>
					</div>
				</div>
				<p class="footnote" style="margin-top: 50px; margin-bottom: 10px; clear: both;">Copyright &#169; AngryAnt&trade; <script>document.write ((new Date ()).getFullYear ());</script>. All public github gists are public domain.</p>
<script>document.write ('<img src="/resources/footers/' + Math.floor (Math.random () * 23 + 1) + '.png" width="600" height="300" class="noprint" style="margin-bottom: -5px;">');</script>

			</div>
		</div>
		

	</body>
</html>

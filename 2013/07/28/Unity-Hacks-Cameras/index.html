<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<title>AngryAnt - Unity Hacks: Cameras - </title>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="stylesheet" href="/css/screen/base.css" type="text/css" media="screen" />
<link rel="stylesheet" href="/css/screen/site.css" type="text/css" media="screen" />
<link rel="stylesheet" href="/css/print/base.css" type="text/css" media="print" />
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-34029666-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>


	</head>
	<body>
		<div id="site">
			<div id="sidebar">
				<h1 class="header"><a href="/" style="padding:0; margin:0; float: none;">AngryAnt</a></h1>
<div id="subtitle">Unity Hacks: Cameras</div>

	
		<a href="/">Home</a>
		
	

	
		<a href="/freelance">Freelance</a>
		
	

	
		<a href="/work">Work</a>
		
	

	
		<a href="/behave">Behave</a>
		
	

	
		<a href="/tools">Tools</a>
		
	

	
		<a href="/feed">Feed</a>
		
	

	
		<a href="/videos">Videos</a>
		
	


<div id="external">
	<a href="/feed.xml">RSS</a>
	<a href="/feed.articles.xml">Full RSS</a>
	<a href="https://gist.github.com/AngryAnt">Gist</a>
	<a href="https://twitter.com/AngryAnt">Twitter</a>
	<a href="http://www.linkedin.com/in/EmilJohansen">LinkedIn</a>
</div>
<div class="comment">
	That's right - no comments. Please use Twitter or other listed means for feedback.
</div>
<img id="logo" title="Logo" alt="Logo" src="/resources/logo.png">

			</div>
			<div id="container">
				<span class="date">28 Jul 2013</span>
				<h1 id="Top">Unity Hacks: Cameras</h1>
				
				<div id="content">
					<p class="post"><p>In my <a href="http://angryant.com/2013/07/19/Unity-Hacks-Touch-gestures/">effort to pick apart</a> the &#8220;Unity Hacks&#8221; project as made available, along with a recording of the presentation, in the <a href="/videos">videos</a> section, I now focus on the camera system.</p>
<h1>Overview</h1>
<p>Like the other new components I was preparing for the new standard assets, a key part of this setup is modularity and versatility. This is why I from the start chose to have camera handling values maintained via the transform tree &#8211; as opposed to maintaining internal values to overwrite the transform values when updated.</p>
<p>This way, not only can camera logic be broken down into several components which can be optional or replaced, but co-operation between the camera system, animations and any other systems which could apply relative transformation, is much easier.</p>
<p>As this approach would be placing a certain requirement on the transform tree structure surrounding the camera in any case, I opted to go for greatest amount of possible detail vs. smallest impact. The structure therefore requires a three layers deep transform tree.</p>
<p>The root of the tree is designated the horizontal hinge. It takes care of movement in all three dimensions as well as rotation on the horizontal plane. The immediate child of this transform is referred to as the vertical hinge. This transform is expected to not move and will have its position reset every frame to enforce this. In stead, the vertical hinge is only responsible for rotation on the vertical plane.</p>
<p>The final transform, the child of the vertical hinge, is expected to not rotate and only move on its relative z-axis. This effectively makes it the zoom component of the rig. The GameObject of this transform is the one holding the camera component.</p>
<h1>DualHingeCamera</h1>
<p>Maintaining and abstracting this setup is the <a href="https://github.com/AngryAnt/UnityHacks/blob/master/Assets/Standard%20Assets/Camera/DualHingeCamera.cs">DualHingeCamera</a> component. With reference to the different transforms of the rig, this component maintains the setup by apply three targets: targetOffset, targetHorizontalRotation and targetVerticalRotation. These are set by controller scripts and applied via constrained speed and offset variables.</p>
<p>Vertical rotation is clamped and damped by the verticalSpan animation curve variable. As explained in the presentation, the time value of the most extreme animation keys specify the vertical angles (relative to a vector pointing backwards from the rig root) at which vertical rotation is clamped.</p>
<p>The height of the curve at any point specifies the scale of the update speed &#8211; as the camera moves through that angle and further towards the end of the half of the curve it is on. As in: If the angle is above the middle of the vertical span and the camera is moving further up, speed is scaled according to the curve, but if it is moving down then no scale is applied. The inverse if of-course true as well. The effect, assuming the curve is not flat, is a smooth limit rather than a hard clamp.</p>
<h1>Control</h1>
<p>The base for any of the example camera behaviours supplied with the project is the <a href="https://github.com/AngryAnt/UnityHacks/blob/master/Assets/Standard%20Assets/Camera/CameraBehaviour.cs">CameraBehaviour</a> component. This supplies wrapping of access to the DualHingeCamera, as well as a bit of default handling &#8211; such as automatically updating the camera activity tracking when the camera moves. It also offers up the MoveCamera method as a common interface for input scripts to apply movement instructions.</p>
<p>One of the most simple examples of a camera behaviour is the <a href="https://github.com/AngryAnt/UnityHacks/blob/master/Assets/Standard%20Assets/Camera/OrbitCamera.cs">OrbitCamera</a>. This camera simply takes the movement instructions (a Vector2) and apply them to the target horizontal and vertical rotation. The result is the familiar behaviour of being able to rotate around a subject, while rotating up and down within the clamped span.</p>
<p>There are several more camera behaviours in the project (which you should take a look at) and they are demonstrated in an example scene as well as within the presentation. However as a last example, I want to point out the <a href="https://github.com/AngryAnt/UnityHacks/blob/master/Assets/Standard%20Assets/Camera/TravelCamera.cs">TravelCamera</a> component. Unlike the others, this does not inherit from CameraBehaviour &#8211; nor does it directly affect its rotation or position. In stead, it holds a simple piece of logic which enables and disables other behaviours, based on input activity. The result should be a behaviour somewhere between that seen in Journey and that of the Assassins Creed games.</p>
<p>I tried to keep this post short, but I hope you still find this useful and decide to build on the system. In any case, here are direct links to the resources covered in the post:</p>
<ul>
	<li><a href="https://github.com/AngryAnt/UnityHacks/blob/master/Assets/Standard%20Assets/Camera/DualHingeCamera.cs">DualHingeCamera.cs</a></li>
	<li><a href="https://github.com/AngryAnt/UnityHacks/blob/master/Assets/Standard%20Assets/Camera/CameraBehaviour.cs">CameraBehaviour.cs</a></li>
	<li><a href="https://github.com/AngryAnt/UnityHacks/blob/master/Assets/Standard%20Assets/Camera/OrbitCamera.cs">OrbitCamera.cs</a></li>
	<li><a href="https://github.com/AngryAnt/UnityHacks/blob/master/Assets/Standard%20Assets/Camera/TravelCamera.cs">TravelCamera.cs</a></li>
</ul>


</p>
					<p>&nbsp;</p>

					<div id="feed">
						<div id="newer">
							
								
									
										<h1>Newer posts:</h1>
										<p style="max-height: 1pt">&nbsp;</p>
									
									<a href="/2014/01/03/Unity-and-net-assemblies/" class="titleSmall">Unity and .net assemblies</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2013/12/23/Behave-2-2/" class="titleSmall">Behave 2.2</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2013/10/11/ReView/" class="titleSmall">ReView</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2013/10/06/Behave-2-1/" class="titleSmall">Behave 2.1</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2013/08/25/Behave-2-0/" class="titleSmall">Behave 2.0</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2013/08/04/Unity-Hacks-Dual-sticks/" class="titleSmall">Unity Hacks: Dual sticks</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									</div>
									<div id="older">
										<h1>Older posts:</h1>
										<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2013/07/19/Unity-Hacks-Touch-gestures/" class="titleSmall">Unity Hacks: Touch gestures</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2013/07/17/OnRenderTextureGUI/" class="titleSmall">OnRenderTextureGUI</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2013/07/05/Unite-13-video-Unity-Hacks-available/" class="titleSmall">Unite 13 video "Unity Hacks" available</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2013/06/07/The-implicit-local-network-interface/" class="titleSmall">The implicit local network interface</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2013/05/21/Talks-and-progress/" class="titleSmall">Talks and progress</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2013/05/14/Five-years-of-Unity-expertise-looking-for-contracts/" class="titleSmall">Five years of Unity expertise looking for contracts</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2012/12/22/Automagic-Unity-Android-Java-gadget-OF-DOOM/" class="titleSmall">Automagic Unity Android Java gadget OF DOOM!</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2012/10/03/Invading-Planet-from-your-couch/" class="titleSmall">Invading Planet from your couch</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2012/09/28/Mountain-Lion-and-laggy-bluetooth-and-duct-tape/" class="titleSmall">Mountain Lion and laggy bluetooth and duct-tape</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2012/09/23/Unite-12-video-and-new-videos-section-available/" class="titleSmall">Unite 12 video and new videos section available</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2012/08/28/Asia-Bootcamp-videos-now-available/" class="titleSmall">Asia Bootcamp videos now available</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2012/05/17/path-is-now-mit-licensed/" class="titleSmall">Path is now MIT licensed</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2011/11/30/behave-1-4-released/" class="titleSmall">Behave 1.4 released</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2011/10/09/so-ive-been-a-bit-busy-lately/" class="titleSmall">So I've been a bit busy lately</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2011/04/28/behave-1-3-released/" class="titleSmall">Behave 1.3 released</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2011/04/23/igda-unity-sig-slides/" class="titleSmall">IGDA Unity SIG slides</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2011/03/17/second-unity-igda-sig-this-evening-scene-construction-and-ai/" class="titleSmall">Second Unity IGDA SIG this evening: Scene construction and AI</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2011/03/10/first-igda-unity-sig-this-evening/" class="titleSmall">First IGDA Unity SIG this evening</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2011/03/03/alternative-licensing-available/" class="titleSmall">Alternative licensing available</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2011/02/15/pathfinding-in-two-line/" class="titleSmall">Pathfinding in two lines</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2011/02/15/path-2-released/" class="titleSmall">Path 2 released</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2011/02/02/assembling-and-assimilating/" class="titleSmall">Assembling and assimilating</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2011/01/29/path-2-intro-screencast/" class="titleSmall">Path 2 intro screencast</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2011/01/29/path-2-beta-release-for-ggj/" class="titleSmall">Path 2 beta release for GGJ</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2011/01/25/aigamedev-master-class-video-now-online-3/" class="titleSmall">AIgameDev master class video now online</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2011/01/09/expanding-beta/" class="titleSmall">Expanding beta</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2010/11/28/behave-aigamedev-master-class-public-stream/" class="titleSmall">Behave AIgameDev master class public stream</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2010/11/27/behave-master-class-on-open-aigamedev-stream-tomorrow/" class="titleSmall">Behave master class on open AIgameDev stream tomorrow</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2010/10/29/interview-with-aigamedev/" class="titleSmall">Interview with AIGameDev</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2010/10/24/new-video-from-tree-to-code/" class="titleSmall">New video: From tree to code</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2010/10/23/issue-tracking-on-github-behave-release-project/" class="titleSmall">Issue tracking on github Behave release project</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2010/10/22/it-university-copenhagen-unity-course-completed/" class="titleSmall">IT University Copenhagen Unity course completed</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2010/10/21/it-university-copenhagen-unity-course-files-thursday/" class="titleSmall">IT University Copenhagen Unity course files Thursday</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2010/10/20/cph-it-university-unity-course-files/" class="titleSmall">CPH IT University Unity course files</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2010/10/11/behave-1-2-released/" class="titleSmall">Behave 1.2 released</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2010/09/29/video-behave-starting-from-scratch/" class="titleSmall">Video: Behave - starting from scratch</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2010/09/29/behave-runtime-documentation-updated/" class="titleSmall">Behave runtime documentation updated</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2010/09/29/behave-1-1-released/" class="titleSmall">Behave 1.1 released</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2010/03/19/faff-cleanup-sketch/" class="titleSmall">FAFF cleanup: Sketch</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2010/03/15/building-a-menu-of-delegates-and-enums/" class="titleSmall">Building a menu of delegates and enums</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2010/03/10/pick-me-pick-me/" class="titleSmall">Pick me! Pick me!</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2010/01/14/optimising-coroutine-yielding-in-c/" class="titleSmall">Optimising coroutine yielding in C#</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2010/01/05/downloading-the-hydra/" class="titleSmall">Downloading the hydra</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2009/11/15/new-license-of-path-gpl/" class="titleSmall">New license of Path: GPL</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2009/11/04/copyinspector/" class="titleSmall">CopyInspector</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2009/10/04/magnetic/" class="titleSmall">Magnetic</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2009/09/18/gui-drag-drop/" class="titleSmall">GUI drag-drop</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2009/09/17/logging-an-entire-gameobject/" class="titleSmall">Logging an entire GameObject</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2009/09/07/i-bet-you-cant-type-an-a/" class="titleSmall">I bet you can't type an A!</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2009/08/31/where-did-that-component-go/" class="titleSmall">Where did that component go?</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2009/08/19/unitysteer/" class="titleSmall">UnitySteer</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2009/05/18/new-and-improved-behave-10-released/" class="titleSmall">New and improved: Behave 1.0 released</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2009/04/08/behave-03b-and-unity-25/" class="titleSmall">Behave 0.3b and unity 2.5</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2009/03/20/behave-03b-hotfix/" class="titleSmall">Behave 0.3b hotfix</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2009/03/19/path-tutorial-video-available/" class="titleSmall">Path tutorial video available</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2009/03/18/path-10-launched/" class="titleSmall">Path 1.0 launched!</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2008/12/17/community-tutorial-2/" class="titleSmall">Continued community tutorials</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2008/11/30/community-tutorial/" class="titleSmall">Community tutorial</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2008/11/28/new-tutorial/" class="titleSmall">New tutorial</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2008/11/04/first-tutorial-available/" class="titleSmall">First tutorial available</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2008/11/02/behave-03b/" class="titleSmall">Behave 0.3b</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2008/10/25/unite-08-open-mic-session/" class="titleSmall">unite '08 open-mic session</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2008/09/24/behave-02b/" class="titleSmall">Behave 0.2b</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2008/09/09/behave-01b/" class="titleSmall">Behave 0.1b</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2008/09/08/behave-pre-release/" class="titleSmall">Behave pre-release</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2008/04/15/path-beta-03b/" class="titleSmall">Path beta 0.3b</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2008/04/12/path-beta-02b/" class="titleSmall">Path beta 0.2b</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2008/04/05/path-beta-01b/" class="titleSmall">Path beta 0.1b</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
								
									
									<a href="/2008/03/30/path-pre-release/" class="titleSmall">Path pre-release</a>
									<p style="max-height: 1pt">&nbsp;</p>
								
							
						</div>
					</div>
				</div>
				<p class="footnote" style="margin-top: 50px; margin-bottom: 10px; clear: both;">Copyright &#169; AngryAnt&trade; <script>document.write ((new Date ()).getFullYear ());</script>. All public github gists are public domain.</p>
<script>document.write ('<img src="/resources/footers/' + Math.floor (Math.random () * 23 + 1) + '.png" width="600" height="300" class="noprint" style="margin-bottom: -5px;">');</script>

			</div>
		</div>
		

	</body>
</html>
